<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <title>テキストアノマライザー</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="color-scheme" content="light dark">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header class="navbar navbar-dark bg-brand shadow-sm">
        <div class="container">
            <span class="navbar-brand fw-bold">テキストアノマライザー</span>
            <span class="text-white-50 small ms-auto">by Rutile3</span>
        </div>
    </header>

    <main class="container my-4">
        <div class="row g-4">
            <!-- 左：入出力 -->
            <div class="col-lg-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-light fw-semibold">入力テキスト</div>
                    <div class="card-body">
                        <textarea id="input" class="form-control mono" rows="12"
                            placeholder="ここに変換したいテキストを貼り付けてね。"></textarea>
                        <div class="d-flex gap-2 mt-3">
                            <button id="btnMask" class="btn btn-primary">置換を実行</button>
                            <button id="btnCopy" class="btn btn-outline-secondary">出力をコピー</button>
                            <button id="btnDownloadOut" class="btn btn-outline-secondary">出力をダウンロード</button>
                            <span class="ms-auto small text-muted" id="stats">置換 0 件</span>
                        </div>
                    </div>
                </div>

                <div class="card shadow-sm mt-4">
                    <div class="card-header bg-light fw-semibold">出力テキスト</div>
                    <div class="card-body">
                        <textarea id="output" class="form-control mono" rows="12" readonly></textarea>
                    </div>
                </div>
            </div>

            <!-- 右：置換マスター -->
            <div class="col-lg-6">
                <div class="card shadow-sm">
                    <div class="card-header bg-light fw-semibold d-flex align-items-center gap-2">
                        置換マスター
                        <span class="badge bg-secondary" id="masterStatus">未読込</span>
                        <div class="ms-auto d-flex flex-wrap gap-2">
                            <input type="file" id="fileInput" accept="application/json" hidden>
                            <button id="btnImport" class="btn btn-sm btn-outline-secondary">インポート</button>
                            <button id="btnExport" class="btn btn-sm btn-outline-secondary">エクスポート</button>
                            <button id="btnSave" class="btn btn-sm btn-success">保存</button>
                        </div>
                    </div>

                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-sm align-middle mb-0" id="masterTable">
                                <thead class="table-light">
                                    <tr>
                                        <th style="width:2.5rem"><input type="checkbox" id="checkAll"></th>
                                        <th style="width:9rem">大分類</th>
                                        <th>置換前</th>
                                        <th>置換後</th>
                                        <th style="width:7rem">操作</th>
                                    </tr>
                                </thead>
                                <tbody id="masterTbody">
                                    <!-- JSで行を描画 -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- フッター -->
                    <div class="card-footer small d-flex flex-column gap-2">
                        <div class="d-flex gap-2">
                            <button class="btn btn-sm btn-outline-dark" type="button" data-bs-toggle="collapse"
                                data-bs-target="#jsonArea">
                                内部JSONを表示/非表示
                            </button>
                            <button id="btnAddRow" class="btn btn-sm btn-outline-primary">行を追加</button>
                            <button id="btnDeleteSelected" class="btn btn-sm btn-outline-danger">選択行を削除</button>
                        </div>
                        <div class="collapse mt-2" id="jsonArea">
                            <textarea id="masterJson" class="form-control mono small" rows="12" readonly></textarea>
                            <div class="form-text">
                                表の編集内容はこのJSONに即時反映されます（保存ボタンでブラウザに永続化）。
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="footer py-3 bg-brand text-white-50">
        <div class="container small">
            <span>© 2025 Rutile3 | MIT License</span>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="app.js"></script>
</body>

</html>